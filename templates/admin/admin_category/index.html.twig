{% extends 'base-admin.html.twig' %}

{% block title %}{{ parent() }} des catégories {% endblock %}

{% block heading %}
    Gestion des catégories en base de donnée
{% endblock %}

{% block body %}
    <h1>Toutes les catégories</h1>
    <div class="row">
        <div class="col-6">
            <a class="text-dark" href="{{ path('admin_category_new') }}">Ajouter une catégorie</a>
        </div>
        <div class="col-6 d-flex justify-content-end">
            <a href="{{ path('admin_category_index',{'currentPage': currentPage,'nbResults': 10}) }}" class="nbResults text-end">Afficher 10 résultats par page</a>
        </div>
        <div class="col-6 d-flex justify-content-end">
            <a href="{{ path('admin_category_index',{'currentPage': currentPage,'nbResults': 5}) }}" class="nbResults text-end">Afficher 5 résultats par page</a>
        </div>
    </div>

    <table class="table table-striped table-hover table-sm ">
        <thead>
            <tr>
                <th>Catégorie</th>
                <th>Catégorie parent</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for category in categories %}
            <tr>
                <td>{{ category.name }}</td>
                <td>{% if category.parentCategory != null %}
                        {{ category.parentCategory.name }}
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>
                    <a class="text-dark" href="{{ path('admin_category_edit', {'id': category.id}) }}">Modifier</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="3">aucune catégorie enregistrée</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
            {% if currentPage != 1 %}
                <li class="page-item">
                    <a class="page-link" href="{{ path('admin_category_index', {'currentPage': currentPage-1, 'nbResults': nbResults}) }}">Précédent</a>
                </li>
            {% endif %}

            {% for page in 1..nbPages%}
                <li class="page-item {% if page == currentPage %}active{% endif %}"><a class="page-link" href="{{ path('admin_category_index', {'currentPage': page, 'nbResults': nbResults}) }}">{{page}}</a></li>
            {% endfor %}

            {% if currentPage != nbPages %}
                <li class="page-item">
                    <a class="page-link" href="{{ path('admin_category_index', {'currentPage': currentPage+1, 'nbResults': nbResults}) }}">Suivant</a>
                </li>
            {% endif %}
        </ul>
    </nav>


{% endblock %}
